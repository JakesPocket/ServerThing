<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ServerThing Shell</title>
  <!-- Material Symbols for app glyphs (local copy for offline / firewall environments) -->
  <link rel="stylesheet" href="/shell/fonts/material-symbols.css">
  <link rel="stylesheet" href="/shell/shell.css">
</head>
<body>
  <!-- System UI Shell - Never reloads, permanent runtime -->
  <div id="shell-container">
    <!-- Status Bar -->
    <div id="status-bar">
      <div class="status-bar-left">
        <button id="sys-nav-button" class="hidden" aria-label="Navigation">
          <svg class="shell-icon" viewBox="0 -960 960 960"><path d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"/></svg>
        </button>
      </div>
      <div class="status-bar-center">
        <span id="status-time">--:--</span>
      </div>
      <div class="status-bar-right">
        <button id="sys-settings-button" class="status-icon-button" aria-label="Settings">
          <svg class="shell-icon" viewBox="0 -960 960 960"><path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5t1-13.5l-103-78 110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5t-1 13.5l103 78-110 190-119-50q-11 8-23 15t-24 12l-16 128H370Zm110-280q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/></svg>
        </button>
        <span id="status-connection">●</span>
      </div>
    </div>

    <!-- App Container - Full screen apps render here -->
    <div id="app-viewport">
      <!-- Home Screen / Launcher -->
      <div id="home-screen" class="screen active">
        <div id="app-grid"></div>
        <p class="hint">Turn dial to select • Click to open</p>
      </div>

      <!-- App iframes load here -->
      <div id="app-container" class="screen"></div>
    </div>

    <!-- Navigation overlay (shown on back button) -->
    <div id="nav-overlay" class="hidden">
      <div class="nav-menu">
        <div class="nav-item selected" data-action="current-app">
          <span class="nav-icon">↻</span>
          <span class="nav-label">Continue</span>
        </div>
        <div class="nav-item" data-action="home">
          <span class="nav-icon">⌂</span>
          <span class="nav-label">Home</span>
        </div>
        <div class="nav-item" data-action="close-app">
          <span class="nav-icon">✕</span>
          <span class="nav-label">Close App</span>
        </div>
      </div>
      <p class="hint">Turn dial to select • Click to choose</p>
    </div>

    <!-- System Settings Overlay -->
    <div id="settings-overlay" class="hidden">
      <div class="settings-panel">
        <div class="settings-header">
          <h3>System Settings</h3>
          <button id="close-settings" class="close-btn">
            <svg class="shell-icon" viewBox="0 -960 960 960"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>
        <div class="settings-content">
          <div class="setting-item">
            <label>Brightness</label>
            <div class="slider-container">
              <svg class="shell-icon sm" viewBox="0 -960 960 960"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-101 57-57 101 101-57 57Zm546-101-101 101-57-57 101-101 57 57ZM212-212l101-101 57 57-101 101-57-57Zm546 101-101-101 57-57 101 101-57 57ZM480-480Z"/></svg>
              <input type="range" id="brightness-slider" min="1" max="255" value="128">
            </div>
          </div>
          <div class="setting-item">
            <label>Auto-Dim</label>
            <div class="toggle-container">
              <input type="checkbox" id="auto-dim-toggle">
            </div>
          </div>
          <div class="setting-item">
            <label>Microphone</label>
            <div class="toggle-container">
              <input type="checkbox" id="mic-toggle">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading" class="hidden">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>
  </div>

  <script src="/shell/shell_v3.js" type="module"></script>
</body>
</html>
